# [137. 只出现一次的数字 II](https://leetcode-cn.com/problems/single-number-ii/)

给你一个整数数组 `nums` ，除某个元素仅出现 **一次** 外，其余每个元素都恰出现 **三次** 。请你找出并返回那个只出现了一次的元素。

*你的算法应该具有线性时间复杂度，且不使用额外空间来实现！*

**示例 1**：
```
输入：nums = [2,2,3,2]
输出：3
```

**示例 2**：
```
输入：nums = [0,1,0,1,0,1,99]
输出：99
```

**解决方法**

使用哈希表是肯定能解决的，但是此处要求线性复杂度+O(1)空间复杂度。在[136. 只出现一次的数字](./136.%20只出现一次的数字.md)中，使用异或操作可以直接得到解，但是此处重复元素出现了3次，异或无法消除。

此处可以使用新的方法，考虑到输入数据为int类型，必为32位，所以可以创建一个32位的数组`alpha`，用于存储`nums`中每个元素在第`i`位为1的个数。
* 如果`alpha[i]%3==0`则说明要求解的元素在该位不为1；
* 如果`alpha[i]%3!=0`则说明要求解的元素在该位为1；

```py
class Solution:
    def singleNumber(self, nums: List[int]) -> int:
        ans = 0
        for i in range(32):
            total = sum((num>>i)&1 for num in nums)     # 记录第i位总共出现了多少个1
            # 如果取余3不为0，则说明出现一次的元素在该位为1
            if total%3:
                if i == 31:
                    ans -= (1<<i)
                else:
                    ans += (1<<i)
        return ans
```